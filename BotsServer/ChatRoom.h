#pragma once

#include <deque>
#include <set>

#include "Participant.h"

typedef std::deque<Message> ChatMessageQueue;

typedef std::shared_ptr<Participant> Participant_ptr;

class ChatRoom
{
public:
	void join(Participant_ptr participant);
	void leave(Participant_ptr participant);
	void deliver(const Message& msg);

private:
	std::set<Participant_ptr> participants_;
	enum { max_recent_msgs = 100 };
	ChatMessageQueue recent_msgs_;
};